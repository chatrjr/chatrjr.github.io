<!DOCTYPE html>
<html>
    <head>
        <title>
            
                Component-Driven Web Design: Environment &bull; ChatRJr's Desk
            
        </title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="description" content="Part 1 attempted to explain why the component-driven way is a good approach going forward. Hopefully you're sold on the idea, because Part 2 is all about tooling." />
        <meta name="author" content="Chatman Richmond Jr." />
        <meta name="viewport" content="width=device-width" />
        <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Roboto:400,400italic,700|Roboto+Slab:700,100' rel='stylesheet' type='text/css'>
        
            <link rel="stylesheet" href="/css/post.css" />
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Component-Driven Web Design: Environment</title>
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
        <div class="container">
          <header class="main-header">
            <a href="/" class="logo"><div class="hide-text">ChatRJr's Desk</div></a>
          </header>

          <article class="post">
  <h1 class="post-title">Component-Driven Web Design: Environment</h1>
  <div class="post-meta">
  <span class="post-meta_date">
    Date: 30 Mar 2013
  </span>
  <span class="post-meta_categories">
    Topics: 
  </span>
  </div>
  
  <div class="post-body">
  
  <p>In <a href="/2013/02/component-driven-web-design-part-1/">Part 1</a> we looked at the concept and merits of a component driven web design approach. We looked at how  planning ahead keeps you sane, no matter the size of your project. Now with Part 2, we&#39;ll look at some tools that can streamline the component-based approach and enable a consistent environment for yourself or your team. I should also mention that the <code>sudo</code> command may be needed by Mac and Linux users. Let&#39;s get started.</p>

<p>Also, I&#39;m warning you now: this post is long. I hope you&#39;ll get a lot from it though.</p>

<p>What you&#39;ll need:</p>

<ul>
<li><p><a href="http://nodejs.org/">Node.js</a></p></li>
<li><p><a href="http://gruntjs.com/">Grunt</a></p></li>
<li><p>Your shell of choice (though I&#39;ll be using Bash)</p></li>
</ul>

<h2>Getting Set Up</h2>

<p>First, we have to prepare our development environment. If you&#39;re already set and have these tools above, then you can jump directly to the <a href="#boilerplate">Preparing Your Boilerplate</a> section of this post. For the rest of you, let&#39;s get up and running.</p>

<h3>Installing Node</h3>

<p>Now I&#39;m going to show you how to install Node. Unfortunately, I don&#39;t have much experience with Mac OSX, so <a href="http://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/">I&#39;ll leave that explanation to someone who knows better</a>. Recently, the Node.js download page added .msi and .exe packages for Windows and .pkg for Mac to make installation relatively painless. Linux users can install it from source if they want, but Chris Lea has <a href="https://launchpad.net/%7Echris-lea/+archive/node.js">graciously released a PPA with the latest version</a> of Node as it releases, so we&#39;ll do it that way.</p>

<p>Crack open your terminal and input the following, waiting for each command to complete:</p>

<p><div>
    <pre><code class='bash'>sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs</code></pre>
  </div></p>

<p>Once you&#39;re done with that, make sure Node installed correctly with the following commands:</p>

<p><div>
    <pre><code class='bash'>which node
which npm</code></pre>
  </div></p>

<p>If they both return a directory, then you&#39;re all set.</p>

<h3>Installing Grunt</h3>

<p>Having installed Node, the rest is simple. Simply input <code>sudo npm install -g grunt-cli</code> and wait for the command to finish. The <code>-g</code> flag tells npm to install the package globally. After that we&#39;re done and ready to move to the actual project.</p>

<div id="boilerplate"></div>

<h2>Preparing Your Boilerplate</h2>

<p>I mentioned it in a previous post, but if you&#39;re fortunate enough to have a community-curated boilerplate available to you, <strong>use it</strong>. Don&#39;t be afraid to stand on the shoulders of giants and let them help you make your work even better. That said, the base of my boilerplate for web projects is unsurprisingly the <a href="http://html5boilerplate.com">HTML5 Boilerplate</a> modified for my needs. The <a href="http://www.initializr.com/">Initializr</a> is a great place to start for a customized H5BP.</p>

<p>Your shell should still be open, so let&#39;s scaffold out our project. In the shell, input:</p>

<p><div>
    <pre><code class='bash'>mkdir src dist</code></pre>
  </div></p>

<p>Next, we want to copy the contents of our boilerplate (in this case: H5BP) into <code>src</code>. The directory you downloaded to may be different from mine, so adjust the command as you need.</p>

<p><div>
    <pre><code class='bash'>cp -ru ~/Downloads/initializr ./src</code></pre>
  </div></p>

<p>When that is done, your directory structure should look something close to this.</p>

<p><div>
    <pre><code class='bash'>├── dist
└── src
    ├── 404.html
    ├── crossdomain.xml
    ├── css
    │    ├── main.css
    │    ├── normalize.css
    │    └── normalize.min.css
    ├── humans.txt
    ├── img
    ├── index.html
    ├── js
    │    ├── main.js
    │    ├── plugins.js
    │    └── vendor
    │        ├── jquery-1.9.1.min.js
    │        └── modernizr-2.6.2-respond-1.1.0.min.js
    └── robots.txt</code></pre>
  </div></p>

<p>Don&#39;t worry about the <code>dist</code> folder for now, we&#39;ll come back to it later. Now we&#39;re going to create two critical files so, in your terminal, enter:</p>

<p><div>
    <pre><code class='bash'>touch package.json Gruntfile.js</code></pre>
  </div></p>

<h3>The Anatomy of package.json</h3>

<p>The <code>package.json</code> file contains most of the metadata for your project if you were building your own npm package. It&#39;s also the key to a predictable Node development environment for teams of any size. First off, you should definitely check out <a href="http://package.json.nodejitsu.com/">Nodejitsu&#39;s interactive package.json page</a> if you want a deep dive into how exactly npm uses it. For our boilerplate, we&#39;re only going to use a few options. I&#39;m going to show you the config, which is rather self-explanatory.</p>

<p><div>
    <pre><code class='json'>{
  &quot;name&quot;: &quot;component-driven-web-design-boilerplate&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;author&quot;: &quot;Joe Everyman &lt;joe@somemail.com&gt;&quot;,
  &quot;description&quot;: &quot;a simple boilerplate for a component-based approach to web design&quot;,
  &quot;contributors&quot;: [
    {
      &quot;name&quot;: &quot;Tom Peters&quot;,
      &quot;email&quot;: &quot;tpeters@somemail.com&quot;
    },</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
  &amp;quot;name&amp;quot;: &amp;quot;Harry Dresden&amp;quot;,
  &amp;quot;email&amp;quot;: &amp;quot;damnpc@somemail.com&amp;quot;
},

{
  &amp;quot;name&amp;quot;: &amp;quot;Dick Grayson&amp;quot;,
  &amp;quot;email&amp;quot;: &amp;quot;nightwing@somemail.com&amp;quot;
}
</code></pre></div>
<p>],
  &quot;devDependencies&quot;: {
  }
}</code></pre>
  </div></p>

<p>You&#39;ll notice we left the <code>&quot;devDependencies&quot;</code> value empty. Don&#39;t fret, we&#39;re about to handle that.</p>

<h3>Preparing Grunt</h3>

<p>Grunt is a JavaScript-based task manager for web projects. If you&#39;ve used Apache Ant or Make, it&#39;s similar to those. Since version 0.4, Grunt has decoupled its command line interface from Grunt itself. That&#39;s what we installed way up there with <code>grunt-cli</code>. In addition to the command line separation, Grunt has a bevy of plugins we can adapt to any web project under the <code>grunt-contrib</code> namespace, but there are also several other plugins written by the open source community, and the API makes it a breeze to roll your own.</p>

<p>Alright, we&#39;re going to grab Grunt and the most essential plugins for our simple boilerplate for now, and we&#39;ll only call in more as the project demands. In your terminal, input:</p>

<p><div>
    <pre><code class='bash'>sudo npm install grunt --save-dev</code></pre>
  </div></p>

<p>The <code>--save-dev</code> flag tells npm to update our <code>&quot;devDependencies&quot;</code> with the latest stable version of the package we specify. In this case, that&#39;s Grunt. Now we&#39;re going to search npm for grunt plugins under the <code>grunt-contrib</code> namespace.</p>

<p><div>
    <pre><code class='bash'>sudo npm search grunt-contrib</code></pre>
  </div></p>

<p>Then we&#39;re gonna install the following essential plugins for a Grunt boilerplate.</p>

<p><div>
    <pre><code class='bash'>sudo npm install grunt-contrib-htmlmin grunt-contrib-imagemin grunt-contrib-cssmin grunt-contrib-csslint grunt-contrib-watch --save-dev</code></pre>
  </div></p>

<p>That done, you&#39;ll see that <code>&quot;devDependencies&quot;</code> has been updated.</p>

<p><div>
    <pre><code class='javascript'>&quot;devDependencies&quot;: {
  &quot;grunt&quot;: &quot;~0.4.1&quot;,
  &quot;grunt-contrib-csslint&quot;: &quot;~0.1.1&quot;,
  &quot;grunt-contrib-htmlmin&quot;: &quot;~0.1.1&quot;,
  &quot;grunt-contrib-watch&quot;: &quot;~0.3.1&quot;,
  &quot;grunt-contrib-cssmin&quot;: &quot;~0.5.0&quot;,
  &quot;grunt-contrib-imagemin&quot;: &quot;~0.1.2&quot;
}</code></pre>
  </div></p>

<h3>Configuring Gruntfile.js</h3>

<p>The <code>Gruntfile.js</code> file houses the configuration for Grunt… or it will once we build it out. So let&#39;s get on that. First, every Grunt configuration requires this wrapper.</p>

<p><div>
    <pre><code class='javascript'>module.exports = function(grunt) {</p>

<p>};</code></pre>
  </div></p>

<p>Now we&#39;re going to load in our tasks. All the code from this point on is going to assume the wrapper function. They don&#39;t have to be in any particular order.</p>

<p><div>
    <pre><code class='javascript'>// Load our tasks
grunt.loadNpmTasks(&#39;grunt-contrib-htmlmin&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-cssmin&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-csslint&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-watch&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-imagemin&#39;);</code></pre>
  </div></p>

<p>Excellent. All that&#39;s left to do is configure our tasks, and we&#39;re going to do that in stages. First we&#39;ll configure <code>&#39;grunt-contrib-htmlmin&#39;</code>. Task configuration has its own wrapper:</p>

<p><div>
    <pre><code class='javascript'>// Configure our tasks
grunt.initConfig({</p>

<p>});</code></pre>
  </div></p>

<p>This code should be inserted above our loaded tasks. Now for the actual task…</p>

<p><div>
    <pre><code class='javascript'>pkg: grunt.file.readJSON(&#39;package.json&#39;),
htmlmin: {
  /**
   * task identifier (htmlmin:build)
   * @type {Object}
   <em>/
  build: {
    /</em>*
     * task options
     * @type {Object}
     <em>/
    options: {
      removeComments: true,
      collapseWhitespace: true
    },
    /</em>*
     * files to be minified (path/to/dist: path/to/source)
     * @type {Object}
     */
    files: {
      &#39;dist/index.html&#39;: &#39;src/index.html&#39;,
      &#39;dist/404.html&#39;: &#39;src/404.html&#39;
    }
  }
},</code></pre>
  </div></p>

<p>It should be noted that the <code>pkg</code> object will allow us to dynamically generate things like authorship banners, as you&#39;ll see in the <code>&#39;grunt-contrib-cssmin&#39;</code> task.</p>

<p><div>
    <pre><code class='javascript'>cssmin: {
  /**
   * task identifier (cssmin:build)
   * @type {Object}
   <em>/
  build: {
    options: {
      banner: &#39;/</em> &lt;%= pkg.name %&gt; - &lt;%= pkg.version %&gt;&#39; + &#39;\n&#39; +
              &#39; * &lt;%= pkg.author %&gt; <em>/&#39;,
      report: &#39;min&#39;
    },
    /</em>*
     * files to be minfied 
     * (path/to/dist: path/to/src || 
     * [path/to/src1, path/to/src2])
     * @type {Object}
     */
    files: {
      &#39;dist/css/style.css&#39;: [&#39;src/css/normalize.css&#39;, &#39;src/css/main.css&#39;]
    }
  }
},</code></pre>
  </div></p>

<p>Before we configure the <code>&#39;grunt-contrib-csslint&#39;</code>, we need to make one more file. The task does allow you to define rules to lint directly in the config, but that isn&#39;t very portable, is it? So we&#39;re going to create <code>.csslintrc</code> to contain the rules, and then for our purposes it will hold the following:</p>

<p><div>
    <pre><code class='json'>{
  &quot;box-sizing&quot;: false,
  &quot;box-model&quot;: true,
  &quot;compatible-vendor-prefixes&quot;: false,
  &quot;display-property-grouping&quot;: true,
  &quot;duplicate-properties&quot;: true,
  &quot;empty-rules&quot;: true,
  &quot;font-sizes&quot;: false,
  &quot;ids&quot;: true,
  &quot;important&quot;: true,
  &quot;outline-none&quot;: false,
  &quot;overqualified-elements&quot;: true,
  &quot;star-property-hack&quot;: false,
  &quot;text-indent&quot;: true,
  &quot;underscore-property-hack&quot;: false,
  &quot;unqualified-attributes&quot;: false,
  &quot;zero-units&quot;: true
}</code></pre>
  </div></p>

<p>If you want an explanation of the rules we&#39;re using, check out the <a href="https://github.com/stubbornella/csslint/wiki/Rules">csslint wiki</a>. For now, let&#39;s configure our task.</p>

<p><div>
    <pre><code class='javascript'>csslint: {
  build: {
    options: {
      csslintrc: &#39;.csslintrc&#39;
    },
    src: &#39;dist/css/<em>.css&#39;
  },
  dev: {
    options: {
      csslintrc: &#39;.csslintrc&#39;
    },
    src: &#39;src/css/</em>.css&#39;
  }
},</code></pre>
  </div></p>

<p>You&#39;ll notice this time we have two identifiers. They&#39;ll be referenced as <code>csslint:build</code> and <code>csslint:dev</code> in the terminal and when we call them. Now then, let&#39;s configure <code>&#39;grunt-contrib-imagemin&#39;</code>.</p>

<p><div>
    <pre><code class='javascript'>imagemin: {
  build: {
    options: {
      optimizationLevel: 3,
      progressive: true
    },
    files: {
      &#39;dist/img&#39;: [&#39;src/img/<em>.jpg&#39;, &#39;src/img/</em>.png&#39;]
    }
  }
},</code></pre>
  </div></p>

<p>We&#39;re almost at the end. Just one more task to configure, and it&#39;s arguably the most valuable one. Imagine how tedious manually tracking every change to your files would be. The good news: with <code>&#39;grunt-contrib-watch&#39;</code> you don&#39;t have to do so. Check it.</p>

<p><div>
    <pre><code class='javascript'>watch: {
  css: {
    files: &#39;&lt;%= csslint.dev.src %&gt;&#39;,
    tasks: [&#39;csslint:dev&#39;]
  }
}</code></pre>
  </div></p>

<p>I referenced the source directly so we don&#39;t repeat ourselves, and then its set to run the defined tasks when those files change. I hope you&#39;re not tired, because we&#39;re almost done. Now we just have to actually register our tasks so they&#39;ll be accessible from the command line. Alright then, the following code should go below where we loaded our tasks. I&#39;ve pasted it again for reference.</p>

<p><div>
    <pre><code class='javascript'>// Load our tasks
grunt.loadNpmTasks(&#39;grunt-contrib-htmlmin&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-cssmin&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-csslint&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-watch&#39;);
grunt.loadNpmTasks(&#39;grunt-contrib-imagemin&#39;);</p>

<p>// Register our tasks for use in the command line.
grunt.registerTask(&#39;default&#39;, [&#39;htmlmin&#39;, &#39;csslint&#39;, &#39;cssmin&#39;, &#39;imagemin&#39;]);
grunt.registerTask(&#39;monitor&#39;, [&#39;watch&#39;]);</code></pre>
  </div></p>

<p>The default task can be explicitly run in the command line with <code>grunt</code>. When you have more than one task, as we do here, then grunt recognizes it by its name in the terminal. So to run our <code>&#39;monitor&#39;</code> task we would input <code>grunt monitor</code>.</p>

<h2>We&#39;re not Done Yet</h2>

<p>Though we are done with this post. The reason I ape a build process and a well-maintained codebase is because it really can make the difference in a team. And hopefully through building this boilerplate (or, just observing it), you&#39;re starting to see the potential gains. The beauty of Grunt is that it&#39;s written in a language that we as web devs already know, and this means it&#39;s piss easy to make it our own. I hope you understand that this is just one way of doing things, and I&#39;d never advocate it as <strong>the</strong> way.</p>

<p>As always, the best process is one that complements your workflow and feels natural. I&#39;m just presenting yet another option for the way we maintain our projects. This component driven web design boilerplate is only a stepping stone toward a more unified team, and I hope you&#39;ll stick around for Part 3 where we start working on a small web project using that philosophy. See you soon, web people.</p>

  </div>
</article>


          <footer class="main-foot">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </footer>
        </div>
      <script src="/js/vendor/prismjs/prism.js"></script>
    </body>
</html>
